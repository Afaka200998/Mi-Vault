<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MiFile Upload</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    input[type="file"] {
      margin: 20px;
    }
    progress {
      width: 80%;
    }
  </style>
</head>
<body>
  <h2>Welcome Admin ðŸ‘‹</h2>
  <p>Upload your photos, videos, or documents</p>

  <input type="file" id="fileInput" />
  <br>
  <button onclick="uploadFile()">Upload</button>
  <br><br>
  <progress value="0" max="100" id="progressBar"></progress>
  <p id="statusText"></p>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCChmtjoC3VN_CNQO6lsBH0a5ZrWbH6teI",
      authDomain: "mi-site-200998.firebaseapp.com",
      projectId: "mi-site-200998",
      storageBucket: "mi-site-200998.appspot.com",
      messagingSenderId: "337208314860",
      appId: "1:337208314860:web:a5399ce8eb7b3ea6a30ec9",
      measurementId: "G-9QGM0LQYS5"
    };
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    function uploadFile() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) {
        alert("Please select a file first.");
        return;
      }

      const storageRef = storage.ref("uploads/" + file.name);
      const uploadTask = storageRef.put(file);

      uploadTask.on("state_changed",
        function (snapshot) {
          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
          document.getElementById("progressBar").value = progress;
          document.getElementById("statusText").innerText = "Uploading... " + Math.round(progress) + "%";
        },
        function (error) {
          alert("Upload failed: " + error);
        },
        function () {
          uploadTask.snapshot.ref.getDownloadURL().then(function (url) {
            document.getElementById("statusText").innerHTML =
              "Upload complete!<br><a href='" + url + "' target='_blank' style='color: #4caf50;'>View File</a>";
          });
        }
      );
    }
  </script>
</body>
</html>
